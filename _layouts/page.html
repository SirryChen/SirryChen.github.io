

<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->

<head>
{% include head.html %}

<script src="https://cdn.counter.dev/script.js" data-id="4c8f7caa-2b55-46cd-a995-2c4633303773" data-utcoffset="8"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T5N5JY1E21"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T5N5JY1E21');
</script>

</head>


<body class="page" itemscope itemtype="http://schema.org/WebPage">

{% include chrome-frame.html %}

{% include navigation.html %}

{% if page.image.feature %}<div class="image-wrap">
  <img src="{{ site.url }}/images/{{ page.image.feature }}" alt="{{ page.title }} feature image" itemprop="primaryImageOfPage">
</div><!-- /.image-wrap -->{% endif %}

<div id="main" role="main"  itemprop="mainContentOfPage">
  <div class="article-author-top">
    {% include author-bio.html %}
  </div>

  <!-- 包裹目录内容的盒子 -->
  <div id="toc-container" style="position: absolute; z-index: 1000;">
    <div id="toc" style="max-height: 70vh; overflow-y: auto; padding: 10px;">
      <!-- 目录将通过JavaScript生成 -->
    </div>
  </div>

  <article itemscope itemtype="http://schema.org/CreativeWork">
  {% comment %}
    <div class="headline-wrap">
      <h1 itemprop="headline">{{ page.title }}</h1>
    </div><!--/ .headline-wrap -->
  {% endcomment %}
    <div class="article-wrap" itemprop="text">
      {{ content }}
    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#index -->

<div class="footer-wrap">
  <footer>
    {% include footer.html %}
  </footer>
</div><!-- /.footer-wrap -->

<script>
  document.addEventListener("DOMContentLoaded", function() {
    var tocContainer = document.getElementById("toc-container");
    var toc = document.getElementById("toc");
    var authorTop = document.querySelector(".article-author-top");
  
    function setTocPosition() {
      var authorRect = authorTop.getBoundingClientRect();
      var authorBottom = authorRect.bottom;
      var authorLeft = authorRect.left;
      var authorWidth = authorRect.width;
  
      // 设置目录的宽度与 .article-author-top 相等
      tocContainer.style.width = authorWidth + 'px';
  
      // 当 .article-author-top 在视口内时，目录跟随其底部
      if (authorBottom > 0) {
        tocContainer.style.position = 'absolute';
        tocContainer.style.top = (authorBottom) + 'px'; // 目录位于 .article-author-top 的底部下方
        tocContainer.style.left = authorLeft + 'px'; // 目录保持水平对齐
      } else {
        // 当 .article-author-top 滚动出视口时，目录停止移动
        tocContainer.style.position = 'absolute';
        tocContainer.style.top = (authorBottom + window.scrollY) + 'px'; // 固定在视口下方
      }
    }
  
    // 初次设置位置
    setTocPosition();
  
    // 监听滚动事件
    window.addEventListener("scroll", setTocPosition);
  
    // 生成目录项
    var headers = document.querySelectorAll("#main h1, #main h2, #main h3, #main h4, #main h5, #main h6");
    headers.forEach(function(header) {
      if (!header.id) {
        header.id = header.textContent.trim().toLowerCase().replace(/\s+/g, '-');
      }
      var link = document.createElement("a");
      link.href = "#" + header.id;
      link.textContent = header.textContent;
      link.style.display = "block";
      link.style.marginLeft = (parseInt(header.tagName.substring(1)) - 1) * 10 + "px"; // 根据标题层级缩进
      toc.appendChild(link);
    });
  });
  </script>
  
  
  
  

{% include scripts.html %}

</body>
</html>